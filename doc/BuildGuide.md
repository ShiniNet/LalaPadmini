# ビルドガイド

> [!TIP]
> Github右上のリストボタン押下で目次（アウトライン）が表示され、工程全体を把握しやすくなります。
![2025-03-06_06h52_32](https://github.com/user-attachments/assets/600b59ae-39ec-4d79-b8a6-39246b630301)

　
## 準備
### キット内容物(詳細)の確認

| 名前 | 数 |
|:-|:-|
|PCB（左右＋エンコーダ基板）|1式|
|XIAOtoFPCコンバーター|2枚+α|
|トラックパッドモジュール|1個|
|FFC（フレキシブルフラットケーブル）12PIN|1個|
|ロータリーエンコーダー|1個|
|FFC（フレキシブルフラットケーブル）5PIN|1個|
|JST SHコネクタ※先行版のみ|2個|
|マグネット|8個|
|滑り止めシール|8枚|
|キーボードケース|1式|
|エンコーダーノブ|1個|
|エンコーダーカバー|1個|
|スイッチカバー|2個|
|マイコンカバー|2個+α|
|ホットスワップソケット|38個|
|17mm狭ピッチキーキャップ|38個|

<br/><br/><br/>
### 別途ご用意いただくもの

| 必須 | 名前 | 数 | 備考 |参考商品|
|:-|:-|---:|:-|:-|
|★|Seeed Studio XIAO nRF52840 |2個|マイコン本体。安価で入手性が高く、通信も安定しています。|[秋月電子](https://akizukidenshi.com/catalog/g/g117341/)|
|★|Kailh Choc V2互換スイッチ|38個|個人的にDeepSeaMiniがおすすめ。Lofreeなども適合。ChocV1も一応刺さります。|[遊舎工房](https://shop.yushakobo.jp/collections/all-switches/Kailh-Choc-V2%E3%82%B9%E3%82%A4%E3%83%83%E3%83%81) [Kailhswitch](https://kailhswitch.net/products/kailh-deep-sea-silent-min-low-profile-keyboard-switch)|
|★|3.7Vリチウムポリマーバッテリー|2個|コネクタピッチ1.25mm、外寸厚さ6.3mm以下、長さ41mm以下、幅20mm以下。 型番としては602040もしくは602035タイプが適合します。容量は300～500mahの製品を確認済み）|[Amazon](https://www.amazon.co.jp/dp/B0D5CJLPM9/)|
|★|USB-Cケーブル|2本|充電、ファームウェア書き込み用。何百回と抜き差しする事になるのでマグネット式がおすすめ。||

### 道具類

|必須| 名前 | 備考 |参考商品|
|:-|:-|:-|:-|
|★|はんだごてセット|アマゾンの温度調整付きはんだごて改善版15点セット（ピンセット、はんだ吸い取り線、フラックス、３C型のこて先入り）がおすすめ。|[amazon](https://www.amazon.co.jp/dp/B0CM1WJB5X/)|
||フラックスクリーナー|フラックスで基板がべとべとになるので掃除用。||
||ピンセット|はんだ中のパーツ固定用。||
||ニッパー|基板の分離用。||
||PCB固定ホルダー|XIAOにFPCを取り付ける時に便利です。||
||テスター|あると電源投入前に配線のショートをチェックできるので怖さが減ります。またトラブル発生時の問題の特定や、サポートのやりとりするために大変有用となっています。ワニ口タイプなら細いピン等を掴む事で細かい端子までチェックができます。|[amazon](https://www.amazon.co.jp/dp/B09S6Y9RM6/)|

※参考商品は全てアフィリエイトの含まれない直リンクです

※参考商品はあくまで参考であり、全ての商品が検証済みではないことにご注意ください

<br>

 
## はんだづけ作業前の準備
- はんだごての取り扱い方が分からない事に起因するトラブルが大変多くなっております。
- はんだ付けが初めての場合、作業を始める前に以下の動画に一度目を通しておくことをお勧めいたします。
- https://youtu.be/dQ7AUjb1tkA?t=1198

![image](https://github.com/user-attachments/assets/83b540a6-6ee8-4ddb-bd2a-ac00fa3dd708)

よくあるはんだづけ注意ポイントは以下のとおりです。
- 初心者は鉛入りはんだを使う（低温でも溶けやすい
- こて先の温度管理（330度前後推奨
- 細すぎるこて先を使わない（標準装備のB型ではなく、3C型がおすすめ
- パーツへしっかり熱を伝える（加熱時間を増やすのではなく、こて先の表面が広くパーツに触れるように意識
- はんだを長時間加熱するとフラックスが蒸発して定着しなくなる。再加熱しても溶けなくなる。小手先を離した時にはんだがトガる。
- フラックスは神（はんだが溶けやすくなり、パーツへの吸着が良くなる
- こて先が酸化するとはんだが溶けなくなる（スチールウールタイプのこて先クリーナーで都度清掃
- はんだごてを一時的でも使用しない時は、はんだで覆って酸化を防ぐ

<br><br>

## PCBの組み立て
### PCBの分離
- ニッパー等で赤丸で囲ったライナー部分をカットします。（素手でも折れると思います

### ホットスワップソケットのはんだづけ
- PCBの裏面の左右合計48箇所へホットスワップソケットを取り付けていきます。


> [!WARNING]
> - ソケットの向きに注意してください。ソケットのでっぱりとPCBのマークが一致するように。
> - はんだはたっぷり目で接合してください。キースイッチ着脱中にソケットが脱落する原因になります。

### ロータリーエンコーダーのはんだづけ
- PCBの表面からエンコーダーを差し込み、裏面から5か所はんだづけします。
### マイコンにFPCコンバーターのはんだづけ
### 基板へトラックパッドとエンコーダーを接続する

<br><br>

## 動作確認
### マイコンへファームウェアの書き込み
### 基板へマイコン（FPC）の取り付け
### 動作確認（USB）
- FPCが破損しやすいのでUSBやFPCソケットへの抜き差しは慎重に。デバッグ中は主にPC側のUSBを抜き差しすることを推奨。
### 動作確認（バッテリー）
- 動作確認が済んだらトラックパッドとエンコーダーはFFCから外しておく。

<br><br>

## キーボードの組み立て
### 基板にトッププレートとキースイッチを装着する
### ボトムケースにマグネットとTPUマウントと基板とスイッチカバーを取り付ける
### トップケースを取り付ける
### マイコンカバーを取り付ける
### トラックパッドとエンコーダーをケースに取り付ける
### キーキャップを取り付ける

<br/><br/><br/>

# 完成！！

> [!TIP]
> [使い方](https://github.com/ShiniNet/LalaPad#%E4%BD%BF%E3%81%84%E6%96%B9)を参考に、楽しい自作キーボードライフを満喫してください！


<br/><br/><br/>

# 組立のトラブルシューティング

- DiscordのHelpチャンネルでも過去のトラブルの事例を確認することができますので、是非ご参加ください！ <BR/>
  ※招待コードはパッケージに同梱されています
- キーボードの使用方法や接続に関するトラブルシューティングは[こちら](https://github.com/ShiniNet/LalaPadmini/tree/main#%E3%83%88%E3%83%A9%E3%83%96%E3%83%AB%E3%82%B7%E3%83%A5%E3%83%BC%E3%83%86%E3%82%A3%E3%83%B3%E3%82%B0)

<br/><br/>

## マイコンが起動しない
## バッテリーから給電されない充電されない

## 特定のキーが動作しない
### 行単位でキーが動作しない（ASDFGがまるごと動作しないなど）
### 列単位でキーが動作しない（EDCがまるごと動作しないなど）
### 特定の１キーが反応しない
- ホットスワップソケットのはんだづけを確認
- キースイッチのピンが折れ曲がって挿入されていないか確認
- PC側の物理配列がUSモードになっているか確認
- 割り当てしているキーコードを変更して動作するか確認

## トラックパッドが動作しない
- キーボードの電源再投入して改善するか確認
- USB接続では動作するか確認
- FFC（フレキシブルフラットケーブル）がねじれて反転して接続されていないか確認
- 左右付け替えて動作するか確認
- マイコンのはんだづけ確認
  
## ロータリーエンコーダーが動作しない
- エンコーダーのはんだづけ確認
- マイコンのはんだづけ確認
